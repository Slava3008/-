# -
Автоматизированное тестирование, проведение тестов в Pycharm/Pytest/Python/Selenium

import pytest
from selenium import webdriver
import time

@pytest.fixture(scope="function")
def driver(request):
    path = str(request.fspath)
    print(request.fspath)
    time.sleep(5)
    driver = webdriver.Chrome(f"{path[:path.find('page_object')]}page_object/chromedriver")
    driver.maximize_window()
    driver.implicitly_wait(5)
    yield driver
    driver.quit()

    Этот код представляет собой настройку тестов с использованием библиотеки pytest и selenium для автоматизации браузера. Вот основные элементы и их функции:

1. Импорт библиотек: Импортируются необходимые библиотеки для тестирования (pytest) и для работы с браузером (selenium.webdriver).

2. Фикстура driver: Создается фикстура с областью видимости "функция". Это означает, что фикстура будет доступна для каждого теста, который ее использует.
Получение пути к файлу: path = str(request.fspath) получает путь к текущему файлу теста. 
Задержкака: time.sleep(5) заставляет выполнение кода приостанавливаться на 5 секунд. Это может быть полезно для ожидания, например, загрузки необходимых ресурсов.
Инициализация драйверара: webdriver.Chrome(.) создает экземпляр Chrome-драйвера, используя путь к исполняемому файлу драйвера, который строится на основе пути к файлу теста.
Настройки драйверара: driver.maximize_window() максимизирует окно браузера, а driver.implicitly_wait(5) устанавливает неявное ожидание в 5 секунд, чтобы дать время элементам загружаться перед их использованием.
Управление жизненным циклом драйверара: yield driver позволяет тестам использовать созданный экземпляр драйвера. После завершения теста driver.quit() закрывает браузер и освобождает ресурсы.

Таким образом, этот код настраивает автоматизированное тестирование в браузере с использованием Selenium, создавая и настраивая драйвер для каждого теста.

from pages.rostelekom_page import RostelekomPage
from pages.shops_page import ShopPage
import time

def test_visit(driver):
    rostelekom_page = RostelekomPage(driver)
    rostelekom_page.visit()

    assert rostelekom_page.get_shops().is_displayed()

    rostelekom_page.get_shops().click()
    shop_page = ShopPage(driver)

    print(shop_page.get_shops())

    assert shop_page.get_shops().is_displayed()

    time.sleep(5)

    Этот код описывает тестовую функцию test_visit, которая выполняет автоматизированное тестирование веб-страницы, связанной с компанией "Ростелеком". Вот основные действия, которые выполняет данный код:

1. Импортирование классов: Импортируются классы RostelekomPage и ShopPage из соответствующих модулей, которые, предположительно, содержат методы для взаимодействия с веб-страницами.

2. Создание экземпляра страницы Ростелеком: В первой строке функции создаётся экземпляр RostelekomPage, передавая в него драйвер, который управляет браузером.

3. Переход на страницу: Метод visit() вызывается для перехода на страницу Ростелеком.

4. Проверка наличия элемента: assert rostelekom_page.get_shops().is_displayed() проверяет, отображается ли элемент, связанный с магазинами на странице. Если элемент не отображается, тест завершится с ошибкой.

5. Клик по элементу: Если элемент отображается, вызывается метод click() для перехода на страницу магазинов.

6. Создание экземпляра страницы магазинов: Создается экземпляр ShopPage, используя тот же драйвер, что и для страницы Ростелеком.

7. Вывод информации о магазинах: print(shop_page.get_shops()) выводит информацию, связанную с магазинами. Вероятно, это может быть список или текст, который отображает доступные магазины.

8. Проверка отображения элементов на странице магазинов: assert shop_page.get_shops().is_displayed() снова проверяет, отображается ли элемент на странице магазинов.

9. Задержка: time.sleep(5) добавляет паузу на 5 секунд, вероятно, для визуального наблюдения за результатами теста перед завершением.

В целом, этот код тестирует функциональность перехода на страницу Ростелеком и наличия элементов, связанных с магазинами, проверяя корректность работы этих функций.

from config import url

class RostelekomPage:

    def __init__(self, driver):
        self.driver = driver

    def visit(self):
        self.driver.get(url)

    def get_shops(self):
        return self.driver.find_element("xpath", "//*[contains(text(), 'Авторизация')]")

Этот код определяет класс RostelekomPage, который предназначен для взаимодействия с веб-страницей Ростелеком. Вот основные цели и функции этого кода:

1. Импорт конфигурации: from config import url — импортирует значение url, которое, вероятно, представляет собой адрес веб-страницы Ростелеком.

2. Определение класса: Класс RostelekomPage содержит методы и атрибуты, которые помогут взаимодействовать с элементами на веб-странице.

3. Инициализация объекта:
   - Метод init, принимает параметр driver, который представляет собой экземпляр веб-драйвера. Этот драйвер используется для управления браузером.

4. Переход на страницу: Метод visit() использует self.driver.get(url), чтобы открыть веб-страницу по указанному адресу.

5. Получение элемента: Метод get_shops() находит элемент на странице, который содержит текст "Авторизация". Этот элемент возвращается для дальнейшего использования, например, для проверки его наличия или выполнения действий (например, клика).

Таким образом, этот код служит для создания абстракции, которая упрощает взаимодействие с веб-страницей Ростелеком, позволяя тестам запускать действия и получать доступ к элементам страницы.

from config import url

class RostelekomPage:

    def __init__(self, driver):
        self.driver = driver

    def get_shops(self):
        return self.driver.find_element_by_xpath("//*[contains(text(), 'Регистрация')]")

Этот код написан на языке Python и предназначен для работы с веб-драйверами, скорее всего, с использованием библиотеки Selenium для автоматизации браузера. 

Вот основные действия, которые выполняет данный код:

1. Импортирует переменную url из модуля config.
2. Определяет класс RostelekomPage.
3. В методе init, инициализирует объект класса, принимая в качестве аргумента driver, который представляет собой экземпляр веб-драйвера.
4. Метод get_shops ищет элемент на веб-странице, содержащий текст "Регистрация", с помощью XPath и возвращает этот элемент.

Таким образом, данный код может быть частью тестовой автоматизации для сайта Ростелекома, где предполагается взаимодействие с элементами страницы.

В коде есть несколько элементов, которые выполняют разные функции:

url="https://spb.rt.ru/help/account"
#shops='/seller'
#"//*[cortains{text(), 'text'}]"

1. url="https://spb.rt.ru/help/account": Этот элемент представляет собой строку, содержащую URL-адрес веб-страницы, на которую вы, вероятно, хотите перейти с помощью веб-драйвера. В данном случае это ссылка на страницу помощи, связанную с аккаунтом Ростелекома в Санкт-Петербурге.

2. shops='/seller': Это, путь к разделу или странице, связанной с продавцами или магазинами. Он может использоваться для навигации на определённую часть сайта, связанного с продажами или услугами.

3. "//[contains(text(), 'text')]": Это выражение XPath, которое используется для поиска элементов на странице. Коллекция //[contains(text(), 'text')] выбирает все элементы (означает любой элемент), содержащие определённый текст (вместо 'text' вы подставляете нужный текст). Это полезно для нахождения элементов, текст которых может варьироваться, но вы знаете его часть.

Все эти элементы вместе могут быть использованы для автоматизации навигации и взаимодействия с веб-страницей Ростелекома.

pytest==6.1.0
selenium==3.141.0
requests==2.25.1

Эти строки представляют собой зависимости, которые указываются в файле, например, requirements.txt, для управления библиотеками, необходимыми для вашего проекта. Вот для чего предназначены каждая из них:

1. pytest==6.1.0: Это библиотека для тестирования на Python, которая позволяет писать тесты, проверять их выполнение и получать отчеты о результатах. Версия 6.1.0 указывает конкретную версию библиотеки, которую следует установить.

2. selenium==3.141.0: Это библиотека для автоматизации веб-браузеров. Она позволяет взаимодействовать с веб-страницами, выполнять действия с элементами и проверять результаты. Версия 3.141.0 указывает на конкретную версию Selenium, которую вы хотите использовать.

3. requests==2.25.1: Это библиотека для отправки HTTP-запросов в Python. Она используется для работы с веб-API, загрузки данных с веб-страниц и выполнения других сетевых операций. Версия 2.25.1 указывает на версию библиотеки, которую следует установить.

Указание версий библиотек помогает обеспечить совместимость и предсказуемость поведения вашего кода, поскольку разные версии могут иметь различные функции и поведение.
